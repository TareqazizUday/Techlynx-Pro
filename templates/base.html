{% load static %}
<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>{% block title %}Techlynx Pro | Digital Dominance & IT Excellence{% endblock %}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block meta_description %}Professional IT and digital marketing services for businesses. Custom web development, AI solutions, SEO, and app development by expert US-based team.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}IT services, web development, AI solutions, digital marketing, app development, SEO services, custom software, US IT company{% endblock %}">
    <meta name="author" content="Techlynx Pro">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="{% block og_title %}Techlynx Pro | Digital Dominance & IT Excellence{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Professional IT and digital marketing services for businesses. Custom web development, AI solutions, SEO, and app development by expert US-based team.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://techlynxpro.com{% block og_url %}/{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{% static 'images/og-image.jpg' %}{% endblock %}">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Techlynx Pro | Digital Dominance & IT Excellence{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Professional IT and digital marketing services for businesses. Custom web development, AI solutions, SEO, and app development by expert US-based team.{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{% static 'images/twitter-card.jpg' %}{% endblock %}">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    
    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300;400;500;600;700" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#136dec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101822",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        {% block extra_css %}{% endblock %}
    </style>
    
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 transition-colors duration-300">

    <!-- Top Navigation Bar -->
    <header class="sticky top-0 z-50 w-full bg-white/80 dark:bg-background-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-2">
                    <a href="{% url 'home' %}" class="flex items-center">
                        <img src="{% static 'images/Techlynx (200 x 60 px).svg' %}" alt="Techlynx Pro Logo" class="h-16 w-auto" />
                    </a>
                </div>
                <nav class="hidden md:flex items-center gap-10">
                    <a class="text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'services' %}">Services</a>
                    <a class="text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'case_studies' %}">Case Studies</a>
                    <a class="text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'about' %}">About Us</a>
                    <a class="text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'careers' %}">Careers</a>
                    <a class="text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'blog' %}">Blog</a>
                </nav>
                <div class="flex items-center gap-4">
                    <a href="{% url 'contact' %}" class="hidden lg:flex bg-primary text-white text-sm font-bold px-6 py-2.5 rounded-lg hover:brightness-110 transition-all shadow-lg shadow-primary/20">
                        Contact Us
                    </a>
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="md:hidden flex items-center justify-center p-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800">
                        <span class="material-symbols-outlined text-3xl">menu</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="hidden fixed inset-0 bg-black/50 z-40 md:hidden"></div>

    <!-- Mobile Menu Drawer -->
    <div id="mobile-menu" class="fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-slate-900 shadow-2xl z-50 transform translate-x-full transition-transform duration-300 md:hidden">
        <div class="flex flex-col h-full">
            <!-- Mobile Menu Header -->
            <div class="flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800">
                <img src="{% static 'images/Techlynx (200 x 60 px).svg' %}" alt="Techlynx Pro" class="h-12 w-auto" />
                <button id="mobile-menu-close" class="p-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800">
                    <span class="material-symbols-outlined text-2xl">close</span>
                </button>
            </div>

            <!-- Mobile Menu Links -->
            <nav class="flex-1 overflow-y-auto py-6">
                <a class="flex items-center gap-3 px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'home' %}">
                    <span class="material-symbols-outlined">home</span>
                    Home
                </a>
                <a class="flex items-center gap-3 px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'services' %}">
                    <span class="material-symbols-outlined">settings</span>
                    Services
                </a>
                <a class="flex items-center gap-3 px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'case_studies' %}">
                    <span class="material-symbols-outlined">folder_open</span>
                    Case Studies
                </a>
                <a class="flex items-center gap-3 px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'about' %}">
                    <span class="material-symbols-outlined">info</span>
                    About Us
                </a>
                <a class="flex items-center gap-3 px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'careers' %}">
                    <span class="material-symbols-outlined">work</span>
                    Careers
                </a>
                <a class="flex items-center gap-3 px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary transition-colors" href="{% url 'blog' %}">
                    <span class="material-symbols-outlined">article</span>
                    Blog
                </a>
            </nav>

            <!-- Mobile Menu Footer -->
            <div class="p-6 border-t border-slate-200 dark:border-slate-800">
                <a href="{% url 'contact' %}" class="flex items-center justify-center gap-2 w-full bg-primary text-white text-base font-bold px-6 py-3 rounded-lg hover:brightness-110 transition-all shadow-lg shadow-primary/20">
                    <span class="material-symbols-outlined">mail</span>
                    Contact Us
                </a>
            </div>
        </div>
    </div>

    <!-- Messages -->
    {% if messages %}
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        {% for message in messages %}
        <div class="mb-4 p-4 rounded-lg {% if message.tags == 'success' %}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200{% elif message.tags == 'error' %}bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200{% else %}bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    {% block content %}
    {% endblock %}

    <!-- Footer Component -->
    {% include 'includes/footer.html' %}

    <!-- Chatbot Widget -->
    <div id="chatbot-container" class="fixed bottom-6 right-6 z-50">
        <!-- Chat Bubble Button -->
        <button id="chat-bubble" class="flex items-center justify-center size-16 bg-primary text-white rounded-full shadow-2xl hover:brightness-110 transition-all duration-300 hover:scale-110">
            <span class="material-symbols-outlined text-3xl">smart_toy</span>
        </button>

        <!-- Chat Window (Hidden by default) -->
        <div id="chat-window" class="hidden absolute bottom-20 right-0 w-[400px] max-w-[calc(100vw-3rem)] bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-[#e7ecf3] dark:border-slate-800 overflow-hidden flex flex-col" style="height: 600px; max-height: calc(100vh - 8rem);">
            <!-- Chat Header -->
            <div class="bg-primary text-white px-6 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="size-10 bg-white/20 rounded-full flex items-center justify-center">
                        <span class="material-symbols-outlined text-2xl">smart_toy</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-base">Techlynx Assistant</h3>
                        <p class="text-xs text-white/80">AI-Powered Support</p>
                    </div>
                </div>
                <button id="chat-close" class="text-white/80 hover:text-white transition-colors">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>

            <!-- Chat Messages -->
            <div id="chat-messages" class="flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50 dark:bg-slate-950">
                <!-- Welcome Message -->
                <div class="flex gap-3">
                    <div class="size-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="material-symbols-outlined text-white text-sm">smart_toy</span>
                    </div>
                    <div class="bg-white dark:bg-slate-900 rounded-2xl rounded-tl-none px-4 py-3 max-w-[80%] shadow-sm">
                        <p class="text-sm text-slate-700 dark:text-slate-300">Hi! I'm Techlynx Assistant. Ask me about our services, pricing, or anything else!</p>
                    </div>
                </div>
            </div>

            <!-- Typing Indicator (Hidden by default) -->
            <div id="typing-indicator" class="hidden px-6 py-2">
                <div class="flex gap-3">
                    <div class="size-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="material-symbols-outlined text-white text-sm">smart_toy</span>
                    </div>
                    <div class="bg-white dark:bg-slate-900 rounded-2xl rounded-tl-none px-4 py-3 shadow-sm">
                        <div class="flex gap-1">
                            <div class="size-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 0ms;"></div>
                            <div class="size-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 150ms;"></div>
                            <div class="size-2 bg-slate-400 rounded-full animate-bounce" style="animation-delay: 300ms;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="p-4 bg-white dark:bg-slate-900 border-t border-[#e7ecf3] dark:border-slate-800">
                <form id="chat-form" class="flex gap-2">
                    <input 
                        type="text" 
                        id="chat-input" 
                        placeholder="Type your message..." 
                        maxlength="500"
                        class="flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-slate-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm text-slate-900 dark:text-white"
                        required
                    />
                    <button 
                        type="submit" 
                        id="chat-send"
                        class="px-4 py-2.5 bg-primary text-white rounded-lg hover:brightness-110 transition-all flex items-center justify-center"
                    >
                        <span class="material-symbols-outlined">send</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Mobile Fullscreen Chat Overlay -->
    <style>
        @media (max-width: 768px) {
            #chat-window {
                position: fixed !important;
                bottom: 0 !important;
                right: 0 !important;
                left: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                height: 100vh !important;
                max-height: 100vh !important;
                border-radius: 0 !important;
            }
            #chat-window.hidden {
                transform: translateY(100%);
            }
        }
    </style>

    <!-- Custom JavaScript -->
    <script src="{% static 'js/custom.js' %}" defer></script>

    {% block extra_js %}{% endblock %}
</body>
</html>
